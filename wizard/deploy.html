<!doctype html>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Bee Travels Deployment Wizard</title>
  <meta name="description" content="Bee Travels Deployment Wizard">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js"></script>
</head>

<body style="padding: 32px;">
  <h1 class="ui header">Bee Travels Deployment Wizard</h1>
  <form method="POST" id="deploymentForm">

    <div class="ui raised segment">
      <div class="ui form">
        <h2 class="ui header">Deployment Method</h2>
        <div class="inline fields">
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="k8s" name="deployment" value="k8s" checked="checked">
              <label for="k8s">K8s</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="openshift" name="deployment" value="openshift">
              <label for="openshift">OpenShift</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="helm" name="deployment" value="helm">
              <label for="helm">Helm</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="knative" name="deployment" value="knative">
              <label for="knative">Knative</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="istio" name="deployment" value="istio" disabled="true">
              <label for="istio">Istio (In Development)</label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="ui raised segment">
      <div class="ui form">
        <h2 class="ui header">Version</h2>
        <div class="inline fields">
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="v1" name="version" value="v1" checked="checked">
              <label for="v1">v1</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="v2" name="version" value="v2" disabled="true">
              <label for="v2">v2 (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="v3" name="version" value="v3" disabled="true">
              <label for="v3">v3 (In Development)</label>
            </div>
          </div>
        </div>
      </div>
    </div>


    <h2>Services</h2>
    <h4>NOTE: UI will automatically be deployed</h4>

    <div class="ui raised segment">
      <div class="ui form">
        <h2 class="ui header">Destination</h2>
        <div class="inline fields">
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="destinationnode" name="destination" value="destinationnode">
              <label for="destinationnode">Node.js</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="destinationpython" name="destination" value="destinationpython" disabled="true">
              <label for="destinationpython">Python (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="destinationjava" name="destination" value="destinationjava" disabled="true">
              <label for="destinationjava">Java (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="destinationgo" name="destination" value="destinationgo" disabled="true">
              <label for="destinationgo">Go (In Development)</label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="ui raised segment">
      <div class="ui form">
        <h2 class="ui header">Hotel</h2>
        <div class="inline fields">
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="hotelnode" name="hotel" value="hotelnode">
              <label for="hotelnode">Node.js</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="hotelpython" name="hotel" value="hotelpython" disabled="true">
              <label for="hotelpython">Python (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="hoteljava" name="hotel" value="hoteljava" disabled="true">
              <label for="hoteljava">Java (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="hotelgo" name="hotel" value="hotelgo" disabled="true">
              <label for="hotelgo">Go (In Development)</label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="ui raised segment">
      <div class="ui form">
        <h2 class="ui header">Car Rental</h2>
        <div class="inline fields">
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="carrentalnode" name="carrental" value="carrentalnode" disabled="true">
              <label for="carrentalnode">Node.js (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="carrentalpython" name="carrental" value="carrentalpython" disabled="true">
              <label for="carrentalpython">Python (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="carrentaljava" name="carrental" value="carrentaljava" disabled="true">
              <label for="carrentaljava">Java (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="carrentalgo" name="carrental" value="carrentalgo" disabled="true">
              <label for="carrentalgo">Go (In Development)</label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="ui raised segment">
      <div class="ui form">
        <h2 class="ui header">Flight</h2>
        <div class="inline fields">
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="flightnode" name="flight" value="flightnode" disabled="true">
              <label for="flightnode">Node.js (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="flightpython" name="flight" value="flightpython" disabled="true">
              <label for="flightpython">Python (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="flightjava" name="flight" value="flightjava" disabled="true">
              <label for="flightjava">Java (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="flightgo" name="flight" value="flightgo" disabled="true">
              <label for="flightgo">Go (In Development)</label>
            </div>
          </div>
        </div>
      </div>
    </div>

    

    <div class="ui raised segment">
      <div class="ui form">
        <h2 class="ui header">Currency Exchange</h2>
        <div class="inline fields">
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="currencyexchangenode" name="currencyexchange" value="currencyexchangenode">
              <label for="currencyexchangenode">Node.js</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="currencyexchangepython" name="currencyexchange" value="currencyexchangepython">
              <label for="currencyexchangepython">Python</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="currencyexchangejava" name="currencyexchange" value="currencyexchangejava" disabled="true">
              <label for="currencyexchangejava">Java (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="currencyexchangego" name="currencyexchange" value="currencyexchangego" disabled="true">
              <label for="currencyexchangego">Go (In Development)</label>
            </div>
          </div>
        </div>
      </div>
    </div>

    


    <div class="ui raised segment">
      <div class="ui form">
        <h2 class="ui header">Weather</h2>
        <div class="inline fields">
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="weathernode" name="weather" value="weathernode" disabled="true">
              <label for="weathernode">Node.js (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="weatherpython" name="weather" value="weatherpython" disabled="true">
              <label for="weatherpython">Python (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="weatherjava" name="weather" value="weatherjava" disabled="true">
              <label for="weatherjava">Java (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="weathergo" name="weather" value="weathergo" disabled="true">
              <label for="weathergo">Go (In Development)</label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="ui raised segment">
      <div class="ui form">
        <h2 class="ui header">Chatbot</h2>
        <div class="inline fields">
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="chatbotnode" name="chatbot" value="chatbotnode" disabled="true">
              <label for="chatbotnode">Node.js (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="chatbotpython" name="chatbot" value="chatbotpython" disabled="true">
              <label for="chatbotpython">Python (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="chatbotjava" name="chatbot" value="chatbotjava" disabled="true">
              <label for="chatbotjava">Java (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="chatbotgo" name="chatbot" value="chatbotgo" disabled="true">
              <label for="chatbotgo">Go (In Development)</label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="ui raised segment">
      <div class="ui form">
        <h2 class="ui header">Email</h2>
        <div class="inline fields">
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="emailnode" name="email" value="emailnode" disabled="true">
              <label for="emailnode">Node.js (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="emailpython" name="email" value="emailpython" disabled="true">
              <label for="emailpython">Python (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="emailjava" name="email" value="emailjava" disabled="true">
              <label for="emailjava">Java (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="emailgo" name="email" value="emailgo" disabled="true">
              <label for="emailgo">Go (In Development)</label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="ui raised segment">
      <div class="ui form">
        <h2 class="ui header">Message</h2>
        <div class="inline fields">
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="messagenode" name="message" value="messagenode" disabled="true">
              <label for="messagenode">Node.js (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="messagepython" name="message" value="messagepython" disabled="true">
              <label for="messagepython">Python (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="messagejava" name="message" value="messagejava" disabled="true">
              <label for="messagejava">Java (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="messagego" name="message" value="messagego" disabled="true">
              <label for="messagego">Go (In Development)</label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="ui raised segment">
      <div class="ui form">
        <h2 class="ui header">Cart</h2>
        <div class="inline fields">
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="cartnode" name="cart" value="cartnode" disabled="true">
              <label for="cartnode">Node.js (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="cartpython" name="cart" value="cartpython" disabled="true">
              <label for="cartpython">Python (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="cartjava" name="cart" value="cartjava" disabled="true">
              <label for="cartjava">Java (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="cartgo" name="cart" value="cartgo" disabled="true">
              <label for="cartgo">Go (In Development)</label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="ui raised segment">
      <div class="ui form">
        <h2 class="ui header">Checkout</h2>
        <div class="inline fields">
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="checkoutnode" name="checkout" value="checkoutnode" disabled="true">
              <label for="checkoutnode">Node.js (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="checkoutpython" name="checkout" value="checkoutpython" disabled="true">
              <label for="checkoutpython">Python (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="checkoutjava" name="checkout" value="checkoutjava" disabled="true">
              <label for="checkoutjava">Java (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="checkoutgo" name="checkout" value="checkoutgo" disabled="true">
              <label for="checkoutgo">Go (In Development)</label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="ui raised segment">
      <div class="ui form">
        <h2 class="ui header">Payment</h2>
        <div class="inline fields">
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="paymentnode" name="payment" value="paymentnode" disabled="true">
              <label for="paymentnode">Node.js (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="paymentpython" name="payment" value="paymentpython" disabled="true">
              <label for="paymentpython">Python (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="paymentjava" name="payment" value="paymentjava" disabled="true">
              <label for="paymentjava">Java (In Development)</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" id="paymentgo" name="payment" value="paymentgo" disabled="true">
              <label for="paymentgo">Go (In Development)</label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <button class="ui primary basic button" id="deployButton" type="button" onclick="deploy()">Deploy</button>
  </form>
</body>

<script>
  deploy = async () => {
    document.getElementById('deployButton').disabled = true;
    document.body.style.cursor = 'wait';
    let deployment = document.getElementById('deploymentForm').elements.deployment.value;
    let version = document.getElementById('deploymentForm').elements.version.value;
    let destination = document.getElementById('deploymentForm').elements.destination.value;
    let hotel = document.getElementById('deploymentForm').elements.hotel.value;
    let carrental = document.getElementById('deploymentForm').elements.carrental.value;
    let flight = document.getElementById('deploymentForm').elements.flight.value;
    let currencyexchange = document.getElementById('deploymentForm').elements.currencyexchange.value;
    let weather = document.getElementById('deploymentForm').elements.weather.value;
    let chatbot = document.getElementById('deploymentForm').elements.chatbot.value;
    let email = document.getElementById('deploymentForm').elements.email.value;
    let message = document.getElementById('deploymentForm').elements.message.value;
    let cart = document.getElementById('deploymentForm').elements.cart.value;
    let checkout = document.getElementById('deploymentForm').elements.checkout.value;
    var payment = document.getElementById('deploymentForm').elements.payment.value;

    let data = {
      deployment: deployment,
      version: version,
      destination: destination,
      hotel: hotel,
      carrental: carrental,
      flight: flight,
      currencyexchange: currencyexchange,
      weather: weather,
      chatbot: chatbot,
      email: email,
      message: message,
      cart: cart,
      checkout: checkout,
      payment: payment
    }

    const response = await fetch("http://localhost:8999/api/v1/deploy", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(data)
    });

    const isDeploying = await response.ok;

    document.getElementById('deployButton').disabled = false;
    document.body.style.cursor = 'default';

    if (isDeploying) {
      alert("Starting deployment to " + deployment);
    } else {
      alert("Error in initializing deployment");
    }


  }
</script>